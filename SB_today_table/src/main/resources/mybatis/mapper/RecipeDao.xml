<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.ezen.todaytable.dao.IRecipeDao">

	<resultMap  id="RecipeMap" type="java.util.HashMap"></resultMap>
	<resultMap  id="RecipeMap2" type="java.util.HashMap"></resultMap>
	<resultMap  id="RecipeMap3" type="java.util.HashMap"></resultMap>
	<resultMap  id="RecipeMap4" type="java.util.HashMap"></resultMap>
	<resultMap  id="RecipeMap5" type="java.util.HashMap"></resultMap>
	
	<select id="getRecipeBannerList" statementType="CALLABLE" parameterType="java.util.HashMap">
		{
			CALL getRecipeBannerList(
				#{ref_cursor3, mode=OUT, jdbcType=CURSOR, javaType=ResultSet, resultMap=RecipeMap3}
			)
		}
	</select>
	
	<select id="recipeCategory" statementType="CALLABLE" parameterType="java.util.HashMap">
		{
			CALL recipeCategory(
				#{recipekey},
				#{ref_cursor, mode=OUT, jdbcType=CURSOR, javaType=ResultSet, resultMap=RecipeMap2}
			)
		}
	</select>
	
	<update id="addRecipeView" statementType="CALLABLE" parameterType="java.util.HashMap">
		{
			CALL addRecipeView(
				#{rnum}
			)
		}
	</update>
	
	<select id="recipeFavoriteAndRec" statementType="CALLABLE" parameterType="java.util.HashMap">
		{
			CALL recipeFavoriteAndRec(
				#{ref_cursor, mode=OUT, jdbcType=CURSOR, javaType=ResultSet, resultMap=RecipeMap},
				#{ref_cursor2, mode=OUT, jdbcType=CURSOR, javaType=ResultSet, resultMap=RecipeMap2}
			)
		}
	</select>
	
	<select id="getRecipe" statementType="CALLABLE" parameterType="java.util.HashMap">
		{
			CALL getRecipe(
				#{rnum},
				#{ref_cursor1, mode=OUT, jdbcType=CURSOR, javaType=ResultSet, resultMap=RecipeMap},
				#{ref_cursor2, mode=OUT, jdbcType=CURSOR, javaType=ResultSet, resultMap=RecipeMap2},
				#{ref_cursor3, mode=OUT, jdbcType=CURSOR, javaType=ResultSet, resultMap=RecipeMap3},
				#{ref_cursor4, mode=OUT, jdbcType=CURSOR, javaType=ResultSet, resultMap=RecipeMap4},
				#{ref_cursor5, mode=OUT, jdbcType=CURSOR, javaType=ResultSet, resultMap=RecipeMap5}
			)
		}
	</select>
	
	<!-- <select id="getRecipe" statementType="CALLABLE" parameterType="java.util.HashMap">
		{
			CALL getRecipe(
				#{rnum},
				#{ref_cursor1, mode=OUT, jdbcType=CURSOR, javaType=ResultSet, resultMap=RecipeMap},
				#{ing, mode=OUT, jdbcType=VARCHAR},
				#{ref_cursor2, mode=OUT, jdbcType=CURSOR, javaType=ResultSet, resultMap=RecipeMap2},
				#{ref_cursor3, mode=OUT, jdbcType=CURSOR, javaType=ResultSet, resultMap=RecipeMap3}
			)
		}
	</select> -->
	
	<delete id="deleteRecipe" statementType="CALLABLE" parameterType="java.util.HashMap">
		{
			CALL deleteRecipe( #{rnum} )
		}
	</delete>
	
	<update id="addReply">
		{
			CALL addReply(
				#{param1}, #{param2}
			)
		}
	</update> 
	
	<insert id="insertRecipe" statementType="CALLABLE" parameterType="java.util.HashMap">
		{
			CALL insertRecipe(
				#{id}, #{subject}, #{content}, #{thumbnail}, #{cookingtime}, #{type}, #{theme},
				#{max_rnum, mode=OUT, jdbcType=INTEGER}
			)
		}
	</insert>
	
	<insert id="insertProcess" statementType="CALLABLE" parameterType="java.util.HashMap">
		{
			CALL insertProcess(
				#{rnum}, #{iseq}, #{links}, #{description}
			)
		}
	</insert>
	
	<insert id="insertIng" statementType="CALLABLE" parameterType="java.util.HashMap">
		{
			CALL insertIng( 
				#{tag}, #{rnum}, #{quantity} 
			)
		}
	</insert>
	
	<!-- <insert id="insertIng" statementType="CALLABLE">
		{
			CALL insertIng( #{param1}, #{param2}, #{param3} )
		}
	</insert> -->
  
  	<delete id="deleteReply">
		delete from reply where replyseq = #{param1}
	</delete>
	
	<select id="likeRecipe" statementType="CALLABLE" parameterType="java.util.HashMap">
		{
			CALL likeRecipe(
				#{id}, #{rnum} 
			)
		}
	</select>
	
	<select id="reportRecipe" statementType="CALLABLE" parameterType="java.util.HashMap">
		{
			CALL reportRecipe(
				#{id}, #{rnum} 
			)
		}
	</select>
	
	

</mapper>